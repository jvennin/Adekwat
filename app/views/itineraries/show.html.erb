<div class="container-fluid push-content">
  <div class="row">
    <div class="col-12 col-sm-12 col-md-4 col-lg-4 col-xl-4 offset-md-4 offset-lg-4 offset-xl-4 no-padding">
      <div class="map-box-container">
        <div id="map" style="width: 100%; height: 300px;" data-markers="<%= @markers.to_json %>" data-mapbox-api-key="<%= ENV['MAPBOX_API_KEY'] %>"></div>
      </div>
      <h1 class="title-sz-3 mt-3">Meilleurs trajets</h1>
      <% @itinerary.routes.each do |route| %>
        <div class="results-itineraries-container mt-4">
          <div class="itinerary-card">
            <div class="subway-line">
              <% route.legs.each do |leg| %>
                <% leg.steps.each_with_index do |step, index| %>
                  <% if step.is_walking? %>
                    <span class="number <%= index + 1 %>"><i class="fas fa-walking"></i></span>
                  <% else %>
                    <span class="number <%= index + 1 %>" style="background-color:<%= step.line_color %>; color:<%= step.line_color_text %>;"><%= step.line_short_name %></span>
                  <% end %>
                <% end %>
              <% end %>
            </div>
            <div class="time">
              <p><span><%= route.duration %> min</span>
            </div>
            <div class="waiting">
                <p>dans <span><%= route.next_departure_time %></span> min de <%= route.next_departure_time_station %></p>
            </div>
          </div>
        </div>
      <% end %>
    </div>
  </div>
</div>
